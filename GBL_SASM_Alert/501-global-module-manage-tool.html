<style>
  .toolbar-button {
    border: none;
    color: #eee;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: auto 0 auto 12pt;
    padding: 3.5pt 5pt;
  }

  .toolbar-button.toolbar-button-disabled {
    color: #999 !important;
    background-color: #444 !important;
    cursor: default !important;
  }

  button.toolbar-button.global-module-manager__button {
    background-color: #451ce8 !important;
  }

  .global-module-manager__dialog {
    overflow-y: scroll;
    width: calc(100% - 2em) !important;
    padding: 0.5em 1em !important;
  }

  .global-module-manager__module-container {
    border: solid 1px #aaa;
    border-radius: 5px;
    padding: 15px;
    margin-bottom: 10px;
    background-color: #e6eeff;
    cursor: grab;
  }

  .global-module-manager__module-title {
    font-size: 14px;
    font-weight: 700;
    margin-bottom: 10px;
  }

  .global-module-manager__module-detail {
    font-size: 12px;
    font-weight: 400;
  }
</style>

<script type="text/javascript">
  $(document).ready(function () {
    (async () => {
      function ajax(options) {
        return new Promise(function (resolve, reject) {
          $.ajax(options).done(resolve).fail(reject);
        });
      }

      const _nr1Header = $("ul.red-ui-header-toolbar");
      if (_nr1Header.length) {
        _nr1Header.prepend(`
            <li>
              <button class="button-group red-ui-deploy-button toolbar-button global-module-manager__button" href="#">
                <i class="fa fa-cog"></i> Global Modules</button>
              </button>
            </li>
        `);
      } else {
        $(".header-toolbar").prepend(`
            <span>
              <span>
                <button class="toolbar-button"><i class="fa fa-cog"></i> Global Modules</button>
              </span>
            </span>
        `);
      }

      $("body").prepend(`<div class="global-module-manager__dialog"></div>`);

      /* 모듈 노드 관리 도구 업데이트 */
      function updateModuleToolDialog() {
        $(".global-module-manager__dialog").attr(
          "title",
          "Modules in Your Local Directory"
        );
        $(".global-module-manager__dialog")
          .siblings(".ui-dialog-titlebar")
          .children(".ui-dialog-title")
          .html("Modules in Your Local Directory");
      }

      RED.events.on("workspace:clear", updateModuleToolDialog);
      RED.events.on("workspace:change", updateModuleToolDialog);
    })();

    $(
      ".global-module-manager__dialog"
    ).append(`<div class="global-module-manager__module-container">
        <div class="global-module-manager__module-title">모듈이름</div>
        <div class="global-module-manager__module-detail">It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using </div>
      </div><div class="global-module-manager__module-container">
        <div class="global-module-manager__module-title">모듈이름</div>
        <div class="global-module-manager__module-detail">It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using </div>
      </div><div class="global-module-manager__module-container">
        <div class="global-module-manager__module-title">모듈이름</div>
        <div class="global-module-manager__module-detail">It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using </div>
      </div>`);

    const moduleManageToolButton = document.querySelector(
      ".global-module-manager__button"
    );
    const moduleManageToolDialog = document.querySelector(
      ".global-module-manager__dialog"
    );

    moduleManageToolButton.addEventListener("click", function (e) {
      $(moduleManageToolDialog).dialog({
        height: 450,
        width: 400,
        buttons: {
          Cancel: function () {
            $(moduleManageToolDialog).dialog("close");
          }
        }
      });
    });
  });
</script>
