<script type="text/javascript">
  console.log(RED);

  let DashboardConfigNode;

  function initializeDashboardConfig() {
    console.log("config node added to palette");

    RED.events.on("nodes:add", function (node) {
      console.log("A node has been added to the workspace!", node);
    });

    RED.events.on("nodes:change", function (node) {
      console.log("A node has been changed!", node);
    });

    RED.events.on("nodes:remove", function (node) {
      console.log("A node has been removed!", node);
    });

    RED.events.on("deploy", function () {
      console.log("A flow has been deployed");
    });

    DashboardConfigNode = {
      id: RED.nodes.id(),
      _def: RED.nodes.getType("soop-dashboard-config"),
      type: "soop-dashboard-config",
      users: [],
    };
    RED.nodes.add(DashboardConfigNode);
    // RED.editor.validateNode(DashboardConfigNode);

    // RED.nodes.eachNode((node) => {
    //   console.log("node", node);
    // });

    RED.nodes.eachConfig((node) => {
      console.log("config", node);
    });
  }
</script>

<script type="text/javascript">
  RED.nodes.registerType("soop-dashboard-config", {
    category: "config",
    defaults: {
      name: {},
    },
    hasUsers: false,
    label: function () {
      return this.name || "Soop Dashboard Config";
    },
    onpaletteadd: initializeDashboardConfig,
  });
</script>

<script type="text/html" data-template-name="soop-dashboard-config">
  <div>This is configuration node for soop dashboard.</div>
</script>
